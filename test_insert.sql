-- Test d'insertion directe
INSERT INTO sqal_sensor_samples (
    time, sample_id, device_id, lot_id,
    vl53l8ch_distance_matrix, vl53l8ch_reflectance_matrix, vl53l8ch_amplitude_matrix,
    vl53l8ch_volume_mm3, vl53l8ch_surface_uniformity, vl53l8ch_quality_score, vl53l8ch_grade,
    as7341_channels, as7341_freshness_index, as7341_fat_quality_index,
    as7341_oxidation_index, as7341_quality_score,
    fusion_final_score, fusion_final_grade, fusion_is_compliant
)
VALUES (
    '2026-01-06T12:00:00Z',
    'TEST-SQL-001',
    'TEST',
    NULL,
    '[[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100]]'::jsonb,
    '[[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150],[150,150,150,150,150,150,150,150]]'::jsonb,
    '[[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100],[100,100,100,100,100,100,100,100]]'::jsonb,
    500000.0,
    0.9,
    0.85,
    'A+',
    '{"F1_415nm": 1000, "F2_445nm": 1200, "F3_480nm": 1500, "F4_515nm": 1800, "F5_555nm": 2000, "F6_590nm": 1700, "F7_630nm": 1400, "F8_680nm": 1100, "Clear": 5000, "NIR": 800}'::jsonb,
    0.9,
    0.85,
    0.05,
    0.88,
    0.86,
    'A+',
    TRUE
);

-- VÃ©rifier
SELECT sample_id, device_id, fusion_final_grade FROM sqal_sensor_samples WHERE sample_id = 'TEST-SQL-001';
